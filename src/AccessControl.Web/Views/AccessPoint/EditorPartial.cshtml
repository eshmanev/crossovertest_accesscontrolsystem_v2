@using AccessControl.Web.Models.Validation
@model AccessControl.Web.Models.AccessPoint.AccessPointIndexViewModel

@using (Html.BeginForm("Index", "AccessPoint", new { ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group">
        <label class="col-sm-2 control-label">Site:</label>
        <div class="col-sm-10">
            @Html.DropDownListFor(x => x.Editor.Site, new SelectList(Model.Editor.SiteDepartments, "Item1", "Item2"), RequiredSelect.Empty, new { @class = "form-control", id = "siteSelector"})
            @Html.ValidationMessageFor(m => m.Editor.Site, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        @foreach (var site in Model.Editor.SiteDepartments)
        {
            <input type="hidden" site="@site.Item2" value="@string.Join(";", @site.Item3)" />
        }

        <label class="col-sm-2 control-label">Department:</label>
        <div class="col-sm-10">
            @Html.DropDownListFor(x => x.Editor.Department, new SelectList(Model.Editor.GetVisibleDepartments()), RequiredSelect.Empty, new { @class = "form-control", id = "departmentSelector" })
            @Html.ValidationMessageFor(m => m.Editor.Department, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">Access Point ID:</label>
        <div class="col-sm-10">
            @Html.TextBoxFor(m => m.Editor.AccessPointId, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Editor.AccessPointId, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">Name:</label>
        <div class="col-sm-10">
            @Html.TextBoxFor(m => m.Editor.Name, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Editor.Name, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-2 control-label">Description:</label>
        <div class="col-sm-10">
            @Html.TextBoxFor(m => m.Editor.Description, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Editor.Description, "", new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10 col-sm-offset-2">
            <button class="btn btn-default">Submit</button>
        </div>
    </div>
}